{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst imagesContainer = document.querySelector('.js-images-container');\n\nexport function appendHitsMarkup(data) {\n  const markup = data\n    .map(\n      item =>\n        `<li class=\"gallery-item\">\n        <a href=\"${item.largeImageURL}\" target=\"_blank\" rel=\"noopener noreferrer\">\n          <article>\n            <img src=\"${item.webformatURL}\" alt=\"${item.tags}\" width=\"360\" height=\"200\"/>\n            <div class=\"text-content-box\">\n                <p class=\"image-text\"><span class=\"image-title\">Likes</span> ${item.likes}</p>\n                <p class=\"image-text\"><span class=\"image-title\">Views</span> ${item.views}</p>\n                <p class=\"image-text\"><span class=\"image-title\">Comments</span> ${item.comments}</p>\n                <p class=\"image-text\"><span class=\"image-title\">Downloads</span> ${item.downloads}</p>\n            </div>\n          </article>\n        </a>\n      </li>`\n    )\n    .join('');\n\n  imagesContainer.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function clearHitsContainer() {\n  imagesContainer.innerHTML = '';\n}\ng;\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport class ImagesApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  fetchImages() {\n    const url = `${BASE_URL}?key=42616276-59c99055eec179e7b1bf68313&q=${this.searchQuery}&lang=en&per_page=15&Page=${this.page}`;\n\n    return fetch(url)\n      .then(response => response.json())\n      .then(data => {\n        if (data.total === 0) {\n          onError();\n        }\n\n        this.incrementPage();\n        return data.hits;\n      });\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n\nexport function onError(error) {\n  iziToast.show({\n    message: `Sorry, there are no images matching <br> your search query. Please, try again!`,\n    position: 'topRight',\n    timeout: 5000,\n    backgroundColor: '#ef4040',\n    messageColor: '#ffffff',\n    messageSize: '12',\n    close: true,\n    closeOnEscape: true,\n    progressBarColor: '#B51B1B',\n    progressBar: true,\n    layout: 2,\n    maxWidth: 432,\n    maxHeigth: 88,\n    animateInside: true,\n    iconUrl: '../css/x-octagon.svg',\n    transitionIn: 'fadeInRight',\n    transitionOut: 'fadeOutRight',\n  });\n}\n","import { appendHitsMarkup, clearHitsContainer } from './js/render-functions';\nimport { ImagesApiService, onError } from './js/pixabay-api';\n\nconst refs = {\n  searchForm: document.querySelector('.js-search-form'),\n  waitingText: document.querySelector('.js-waiting-text'),\n};\n\nconst imagesApiService = new ImagesApiService();\n\nrefs.searchForm.addEventListener('submit', onSearch);\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  refs.waitingText.style.display = 'block';\n\n  imagesApiService.query = e.currentTarget.elements.query.value;\n  imagesApiService.resetPage();\n\n  if (imagesApiService.query === '') {\n    onError();\n    clearHitsContainer();\n    return;\n  }\n\n  imagesApiService\n    .fetchImages(searchQuery)\n    .then(hits => {\n      clearWaitingText();\n      clearHitsContainer();\n      appendHitsMarkup(hits);\n    })\n    .catch(error => {\n      console.log(error);\n    });\n\n  refs.searchForm.reset();\n}\n\nfunction clearWaitingText() {\n  refs.waitingText.style.display = 'none';\n}\n"],"names":["imagesContainer","appendHitsMarkup","data","markup","item","clearHitsContainer","BASE_URL","ImagesApiService","url","response","onError","newQuery","error","iziToast","refs","imagesApiService","onSearch","e","hits","clearWaitingText"],"mappings":"svBAGA,MAAMA,EAAkB,SAAS,cAAc,sBAAsB,EAE9D,SAASC,EAAiBC,EAAM,CACrC,MAAMC,EAASD,EACZ,IACCE,GACE;AAAA,mBACWA,EAAK,aAAa;AAAA;AAAA,wBAEbA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA;AAAA,+EAEmBA,EAAK,KAAK;AAAA,+EACVA,EAAK,KAAK;AAAA,kFACPA,EAAK,QAAQ;AAAA,mFACZA,EAAK,SAAS;AAAA;AAAA;AAAA;AAAA,YAK5F,EACA,KAAK,EAAE,EAEVJ,EAAgB,mBAAmB,YAAaG,CAAM,CACxD,CAEO,SAASE,GAAqB,CACnCL,EAAgB,UAAY,EAC9B,CACA,EC5BA,MAAMM,EAAW,2BAEV,MAAMC,CAAiB,CAC5B,aAAc,CACZ,KAAK,YAAc,GACnB,KAAK,KAAO,CACb,CAED,aAAc,CACZ,MAAMC,EAAM,GAAGF,CAAQ,6CAA6C,KAAK,WAAW,6BAA6B,KAAK,IAAI,GAE1H,OAAO,MAAME,CAAG,EACb,KAAKC,GAAYA,EAAS,MAAM,EAChC,KAAKP,IACAA,EAAK,QAAU,GACjBQ,IAGF,KAAK,cAAa,EACXR,EAAK,KACb,CACJ,CAED,eAAgB,CACd,KAAK,MAAQ,CACd,CAED,WAAY,CACV,KAAK,KAAO,CACb,CAED,IAAI,OAAQ,CACV,OAAO,KAAK,WACb,CAED,IAAI,MAAMS,EAAU,CAClB,KAAK,YAAcA,CACpB,CACH,CAEO,SAASD,EAAQE,EAAO,CAC7BC,EAAS,KAAK,CACZ,QAAS,iFACT,SAAU,WACV,QAAS,IACT,gBAAiB,UACjB,aAAc,UACd,YAAa,KACb,MAAO,GACP,cAAe,GACf,iBAAkB,UAClB,YAAa,GACb,OAAQ,EACR,SAAU,IACV,UAAW,GACX,cAAe,GACf,QAAS,uBACT,aAAc,cACd,cAAe,cACnB,CAAG,CACH,CC5DA,MAAMC,EAAO,CACX,WAAY,SAAS,cAAc,iBAAiB,EACpD,YAAa,SAAS,cAAc,kBAAkB,CACxD,EAEMC,EAAmB,IAAIR,EAE7BO,EAAK,WAAW,iBAAiB,SAAUE,CAAQ,EAEnD,SAASA,EAASC,EAAG,CAQnB,GAPAA,EAAE,eAAc,EAEhBH,EAAK,YAAY,MAAM,QAAU,QAEjCC,EAAiB,MAAQE,EAAE,cAAc,SAAS,MAAM,MACxDF,EAAiB,UAAS,EAEtBA,EAAiB,QAAU,GAAI,CACjCL,IACAL,IACA,MACD,CAEDU,EACG,YAAY,WAAW,EACvB,KAAKG,GAAQ,CACZC,IACAd,IACAJ,EAAiBiB,CAAI,CAC3B,CAAK,EACA,MAAMN,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,EAEHE,EAAK,WAAW,OAClB,CAEA,SAASK,GAAmB,CAC1BL,EAAK,YAAY,MAAM,QAAU,MACnC"}